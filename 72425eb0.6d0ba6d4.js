(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{114:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),s=n(6),r=(n(0),n(142)),o=n(144),i={id:"js15",title:"Making HTTP Requests",sidebar_label:"HTTP Requests"},c={id:"js15",title:"Making HTTP Requests",description:"Types of HTTPRequests",source:"@site/docs/js15.mdx",permalink:"/notebook/docs/js15",editUrl:"https://github.com/savithagollamudi/notebook/tree/master/notes-website/docs/js15.mdx",sidebar_label:"HTTP Requests",sidebar:"someSidebar",previous:{title:"Promises",permalink:"/notebook/docs/js20"},next:{title:"Async and Await",permalink:"/notebook/docs/js16"}},l=[{value:"Types of HTTPRequests",id:"types-of-httprequests",children:[]},{value:"AJAX",id:"ajax",children:[{value:"JSON and XML",id:"json-and-xml",children:[]},{value:"XMLHttpRequest : Basics",id:"xmlhttprequest--basics",children:[]},{value:"XMLHttpRequest : Chaining Requests",id:"xmlhttprequest--chaining-requests",children:[]}]},{value:"A Better way : Fetch!",id:"a-better-way--fetch",children:[{value:"Fetch API",id:"fetch-api",children:[]},{value:"Chaining Fetch requests",id:"chaining-fetch-requests",children:[]},{value:"Refactoring fetch Chains",id:"refactoring-fetch-chains",children:[]}]},{value:"Even Better way : AXIOS",id:"even-better-way--axios",children:[{value:"Intro",id:"intro",children:[]},{value:"Sequential Axios Requests",id:"sequential-axios-requests",children:[]}]}],p={rightToc:l};function b(e){var t=e.components,n=Object(s.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"types-of-httprequests"},"Types of HTTPRequests"),Object(r.b)("p",null,"In this section we will explore , how to get information from an api like load movie data, logging into fb or sending data off to your sever to save to db. We send a request from client side. so pre-reqs: async js and promises . Coz most requests take time."),Object(r.b)("p",null,"There are multiple ways of making requests"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"XMLHTTP requests"),Object(r.b)("li",{parentName:"ol"},"Fetch"),Object(r.b)("li",{parentName:"ol"},"Axios")),Object(r.b)("h2",{id:"ajax"},"AJAX"),Object(r.b)("p",null,"Before we learn about making requests, lets learn about AJAX(Asynchronous Javascript and XML). These days we mostly work with AJAJ(Asynchronous Javascript and JSON)"),Object(r.b)("p",null,"Before single page applications came into picture AJAX was the major thing."),Object(r.b)("p",null,"If AJAX is used Whenever a new request is made, page reloads. Where as for single page apps, page never reloads when a new request is made."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Refer ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX/Getting_Started"}),"AJAX"))),Object(r.b)("h3",{id:"json-and-xml"},"JSON and XML"),Object(r.b)("p",null,"AJAJ and AJAX are two ways of basically formatting data so that we can send it from one server to another server or server to browser.\nAlthough X in Ajax stands for XML, JSON is used more than XML nowadays because of its many advantages such as being lighter and a part of JavaScript. Both JSON and XML are used for packaging information in the Ajax model."),Object(r.b)("h4",{id:"xml"},"XML:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-xml"}),"<name>\n    <first>Todd</first>\n    <last>Smith</last>\n</name>\n<email>todd@gmail.com</email>\n")),Object(r.b)("p",null,"Using javascript we can parse XML to js objects"),Object(r.b)("h4",{id:"json"},"JSON:"),Object(r.b)("p",null,"Its another notation to send data. every key in json must be strings. we can have value as numbers, boolean, arrays, but not complicated things like functions"),Object(r.b)("h3",{id:"xmlhttprequest--basics"},"XMLHttpRequest : Basics"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},'The "original" way of sending requests via JS.'),Object(r.b)("li",{parentName:"ul"},"Doesn't support promises, so.. lots of callbacks! :("),Object(r.b)("li",{parentName:"ul"},"Clunky syntax -> hard to remember")),Object(r.b)("img",{alt:"xhrcode",src:Object(o.a)("assets/xhrcode.png")}),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Learn more about it ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest"}),"here"))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const firstReq = new XMLHttpRequest();\n//In the event, if everything works perfectly\nfirstReq.addEventListener("load", function () {\n  //convert the json data which we receive as response to js object\n  const data = JSON.parse(this.responseText);\n  // print planet names from api\n  for (let planet of data.results) {\n    console.log(planet.name);\n  }\n});\n//in the event if something fails\nfirstReq.addEventListener("error", () => {\n  console.log("Error!!!");\n});\nfirstReq.open("GET", "https://swapi.dev/api/planets"); // this takes time\nfirstReq.send(); // request is sent to browser to handle it\nconsole.log("Request sent");\n')),Object(r.b)("p",null,"There are two ways in which an XMLHttpRequest can fail -"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"We can try to issue a request to a remote web server that doesn't exist"),Object(r.b)("li",{parentName:"ol"},"We can try to issue a request to a remote web server that does exist, but that server can send is back a response with an error status code.")),Object(r.b)("p",null,"Now here's the confusing part: a request that fails due to #1 triggers the 'error' event. A request that fails due to #2 does not. It still triggers the 'load' event! This is kind of unexpected, which means that we'd have to inspect the response that comes back, look at the status code, and decide whether the request actually was an error or not."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Refer ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.udemy.com/course/javascript-beginners-complete-tutorial/learn/lecture/17178062#questions/8856128"}),"Q/A"))),Object(r.b)("p",null,"Access the data that is coming back from server using ",Object(r.b)("strong",{parentName:"p"},"this.responseText")),Object(r.b)("p",null,"But responseText property in our object 'firstReq' can be huge (It is JSON here) , parse it to javascript using ",Object(r.b)("strong",{parentName:"p"},"JSON.parse()")),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"If you want to access ",Object(r.b)("inlineCode",{parentName:"p"},"this")," inside callback, dont use arrow function as callback"))),Object(r.b)("h3",{id:"xmlhttprequest--chaining-requests"},"XMLHttpRequest : Chaining Requests"),Object(r.b)("p",null,"This is only 2 levels deep, still it looks more complicated."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const firstReq = new XMLHttpRequest();\nfirstReq.addEventListener("load", function () {\n  const data = JSON.parse(this.responseText);\n  //extract data from planets api, which internally has some other apis\n  const filmURL = data.results[0].films[0];\n  // to access this we have to write an entire request once again\n  const filmReq = new XMLHttpRequest();\n  filmReq.addEventListener("load", function () {\n    const filmData = JSON.parse(this.responseText);\n    console.log(filmData);\n  });\n  filmReq.addEventListener("error", function (e) {\n    console.log("Error", e);\n  });\n  filmReq.open("GET", filmURL);\n  filmReq.send();\n});\nfirstReq.addEventListener("error", function (e) {\n  console.log("Error!!!", e);\n});\nfirstReq.open("GET", "https://swapi.dev/api/planets"); // this takes time\nfirstReq.send(); // request is sent to browser to handle it\nconsole.log("Request sent");\n')),Object(r.b)("hr",null),Object(r.b)("h2",{id:"a-better-way--fetch"},"A Better way : Fetch!"),Object(r.b)("h3",{id:"fetch-api"},"Fetch API"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Newer way of making requests via JS"),Object(r.b)("li",{parentName:"ol"},"Supports Promises!"),Object(r.b)("li",{parentName:"ol"},"Not supported in IE :(")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"fetch()")," method takes one mandatory argument, the path to the resource you want to fetch. It returns a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"}),"Promise")," that resolves to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Response"}),"Response")," to that request, whether it is successful or not. You can also optionally pass in an init options object as the second argument (see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Request"}),"Request"),")."),Object(r.b)("p",null,"Syntax:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("http://example.com/movies.json")\n  .then((response) => response.json())\n  .then((data) => console.log(data)); //RT : promise\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"fetch method returns a promise"))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("https://swapi.dev/api/planets").then((response) => {\n  console.log(response);\n});\n\nOutput:\nResponse {type: "cors", url: "https://swapi.dev/api/planets/", redirected: true, status: 200, ok: true, \u2026}\nbody: ReadableStream\nlocked: false\n__proto__: ReadableStream\nbodyUsed: false\nheaders: Headers {}\nok: true\nredirected: true\nstatus: 200\nstatusText: ""\ntype: "cors"\nurl: "https://swapi.dev/api/planets/"\n__proto__: Response\n')),Object(r.b)("p",null,"body property : is a readable stream."),Object(r.b)("p",null,'ReadableStream is a stream of "byte data". This is one of the key differences from XHR'),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Source: MDN\nThe ReadableStream interface of the Streams API represents a ",Object(r.b)("strong",{parentName:"p"},"readable stream of byte data"),". The Fetch API offers a concrete instance of a ReadableStream through the body property of a Response object."),Object(r.b)("p",{parentName:"div"},"Refer ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/en-US/docs/Web/API/Body/body"}),"ReadableStream")))),Object(r.b)("h4",{id:"bodyjson"},"Body.json():"),Object(r.b)("p",null,"The json() method of the Body mixin takes a Response stream and reads it to completion. It returns a promise that resolves with the result of parsing the body text as JSON."),Object(r.b)("p",null,"RT: A Promise that resolves to a JavaScript object. This object could be anything that can be represented by JSON \u2014 an object, an array, a string, a number..."),Object(r.b)("p",null,"syntax :"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"response.json().then((data) => {\n  // do something with your data\n}); //RT: Promise\n")),Object(r.b)("p",null,"Since response.json() returns a promise, use .then or .catch to resolve or reject the promise. (response.json() is async method, it will take a while to load)"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("https://swapi.dev/api/planets").then((response) => {\n  console.log(response.json());\n});\n\nOutput :\nPromise {<pending>}\n__proto__: Promise\n[[PromiseStatus]]: "resolved"\n[[PromiseValue]]: undefined\n')),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("https://swapi.dev/api/planets").then((response) => {\n  response.json().then((data) => {\n    console.log(data);\n  });\n});\nOutput:\nCoz our promise is resolved\n{count: 60, next: "http://swapi.dev/api/planets/?page=2", previous: null, results: Array(10)}\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"For more info on ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developers.google.com/web/updates/2015/03/introduction-to-fetch"}),"Fetch API"))),Object(r.b)("p",null,"Lets refactor the previous code using fetch"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'//get the list of planet names using fetch api\nfetch("https://swapi.dev/api/planets").then((response) => {\n  response\n    .json()\n    .then((data) => {\n      for (let planet of data.results) {\n        console.log(planet.name);\n      }\n    })\n    .catch((error) => {\n      console.log("Something went wrong", error);\n    });\n});\n')),Object(r.b)("div",{className:"admonition admonition-important alert alert--info"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"The Promise returned from fetch() won\u2019t reject on HTTP error status even if the response is an HTTP 404 or 500. Instead, it will resolve normally (with ok status set to false), and it will only reject on network failure or if anything prevented the request from completing."))),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("https://swapi.dev/api/planetssakdjhskj").then((response) => {\n  response\n    .json()\n    .then((data) => {\n      for (let planet of data.results) {\n        console.log(planet.name);\n      }\n    })\n    .catch((error) => {\n      console.log("Something went wrong", error);\n    });\n});\n\n// Output:\n// VM88:1 GET https://swapi.dev/api/planetssakdjhskj 404\n// (anonymous) @ VM88:1\n// VM88:10 Something went wrong SyntaxError: Unexpected token < in JSON at position 1\n\n// Promise got resolved, instead of throwing an error\n')),Object(r.b)("p",null,"Lets say there was a network failure"),Object(r.b)("p",null,"error:\nThis is caught in promise"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"VM122:1 GET https://swapi.dev/api/planetssakdjhskj net::ERR_INTERNET_DISCONNECTED")),Object(r.b)("p",null,"Before we try and read json, lets make sure we will proceed if only our status code is 200."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'//1st way\nfetch("https://swapi.dev/api/planets")\n  .then((response) => {\n    if (!response.ok) {\n      console.log("Error: Status is not 200", response.status);\n    } else {\n      response.json().then((data) => {\n        for (let planet of data.results) {\n          console.log(planet.name);\n        }\n      });\n    }\n  })\n  .catch((error) => {\n    console.log("Something went wrong", error);\n  });\n\n//2nd way\n//we can also throw an error in .then()\n\nfetch("https://swapi.dev/api/planets")\n  .then((response) => {\n    if (!response.ok) {\n      throw new Error(`status code error :${response.status}`);\n    } else {\n      response.json().then((data) => {\n        for (let planet of data.results) {\n          console.log(planet.name);\n        }\n      });\n    }\n  })\n  .catch((error) => {\n    console.log("Something went wrong", error);\n  });\n')),Object(r.b)("h3",{id:"chaining-fetch-requests"},"Chaining Fetch requests"),Object(r.b)("p",null,"We can chain the fetch requests one after the other and avoid the messy callback situation previously we had using XHR."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'fetch("https://swapi.dev/api/planets")\n  .then((response) => {\n    if (!response.ok) throw new Error(`status code error :${response.status}`);\n    //instead of nesting .then inside another .then\n    //  return a promise which is returned from response.json() and chain another.then to it\n    return response.json();\n  })\n  .then((data) => {\n    console.log("Fetched all planets(first 10)");\n    const filmURL = data.results[0].films[0];\n    return fetch(filmURL);\n  })\n  .then((response) => {\n    if (!response.ok) throw new Error(`status code error :${response.status}`);\n    return response.json();\n  })\n  .then((data) => {\n    console.log("Fetched first film based off of first planet");\n    console.log(data.title);\n  })\n  .catch((error) => {\n    console.log("Something went wrong", error);\n  });\n\n// Output:\n// A new hope\n')),Object(r.b)("h3",{id:"refactoring-fetch-chains"},"Refactoring fetch Chains"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const checkStatusAndParse = (response) => {\n  if (!response.ok) throw new Error(`status code error :${response.status}`);\n  return response.json();\n};\nconst printPlanets = (data) => {\n  console.log("Loaded 10 more planets...");\n  for (let planet of data.results) {\n    console.log(planet.name);\n  }\n  //two ways to resolve a promise\n  //1st way\n  return new Promise((resolve, reject) => {\n    // resolve with data, because next .then requires the data\n    resolve(data);\n  });\n  //2nd way ->  Promise.resolve() we dont need to go through the clunky syntax\n  return Promise.resolve(data);\n};\nfetch("https://swapi.dev/api/planets")\n  .then(checkStatusAndParse)\n  .then(printPlanets) //next .then throws an error because we are not returning any promise from printPlanets\n  //promise chaining works only when a promise is returned from previous .then\n  .then((data) => {\n    const nextURL = data.next;\n    return fetch(nextURL);\n  })\n  .then(checkStatusAndParse)\n  .then(printPlanets)\n  .catch((error) => {\n    console.log("Something went wrong", error);\n  });\n')),Object(r.b)("p",null,"Final code.."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const checkStatusAndParse = (response) => {\n  if (!response.ok) throw new Error(`status code error :${response.status}`);\n  return response.json();\n};\nconst printPlanets = (data) => {\n  console.log("Loaded 10 more planets...");\n  for (let planet of data.results) {\n    console.log(planet.name);\n  }\n  return Promise.resolve(data.next); // coz next .then() expects a url\n};\n//or we can give a url parameter  a default  url and from next time onwards it will pick a data.next\nconst fetchMorePlanets = (url = "https://swapi.dev/api/planets") => {\n  return fetch(url);\n};\n\nfetchMorePlanets()\n  .then(checkStatusAndParse)\n  .then(printPlanets)\n  .then(fetchMorePlanets)\n  .then(checkStatusAndParse)\n  .then(printPlanets)\n  .catch((error) => {\n    console.log("Something went wrong", error);\n  });\n')),Object(r.b)("hr",null),Object(r.b)("h2",{id:"even-better-way--axios"},"Even Better way : AXIOS"),Object(r.b)("h3",{id:"intro"},"Intro"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"A library for making HTTP requests"),". This is not an inbuilt option."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/axios/axios"}),"Official repo"))),Object(r.b)("p",null,"Behind the scenes, axios uses fetch internally. One nice thing about axios is we can use it on both client side(browser) and server side(node.js), which is not true with many other libraries."),Object(r.b)("p",null,"Main advantage of axios over fetch is, data is already parsed to javascript for us and status code validity is done, we dont need to parse it externally using response.json()"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'axios.get("https://swapi.dev/api/planets").then((res) => {\n  console.log(res.data);\n});\n\n// Output:\n// {count: 60, next: "http://swapi.dev/api/planets/?page=2", previous: null, results: Array(10)}\n// count: 60\n// next: "http://swapi.dev/api/planets/?page=2"\n// previous: null\n// results: (10) [{\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}, {\u2026}]\n// __proto__: Object\n')),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'axios\n  .get("https://swapi.dev/api/planetssdsd")\n  .then((res) => {\n    console.log(res.data);\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n//output\n// spread.js:25 GET https://swapi.dev/api/planetssdsd 404\n// (anonymous) @ spread.js:25\n// e.exports @ spread.js:25\n// e.exports @ spread.js:25\n// Promise.then (async)\n// r.request @ spread.js:25\n// r.<computed> @ spread.js:25\n// (anonymous) @ spread.js:25\n// (anonymous) @ app.js:49\n// app.js:54 Error: Request failed with status code 404\n//     at e.exports (spread.js:25)\n//     at e.exports (spread.js:25)\n//     at XMLHttpRequest.l.onreadystatechange (spread.js:25)\n')),Object(r.b)("h3",{id:"sequential-axios-requests"},"Sequential Axios Requests"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'const fetchNextPlanet = (url = "https://swapi.dev/api/planets") => {\n  return axios.get(url);\n};\nconst printPlanets = ({ data }) => {\n  for (let planet of data.results) {\n    console.log(planet.name);\n  }\n  return Promise.resolve(data.next);\n};\nfetchNextPlanet()\n  .then(printPlanets)\n  .then(fetchNextPlanet)\n  .then(printPlanets)\n  .catch((err) => {\n    console.log(err);\n  });\n')))}b.isMDXComponent=!0},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var a=n(0),s=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=s.a.createContext({}),p=function(e){var t=s.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},b=function(e){var t=p(e.components);return s.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return s.a.createElement(s.a.Fragment,{},t)}},u=s.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),b=p(n),u=a,h=b["".concat(o,".").concat(u)]||b[u]||d[u]||r;return n?s.a.createElement(h,i(i({ref:t},l),{},{components:n})):s.a.createElement(h,i({ref:t},l))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var l=2;l<r;l++)o[l]=n[l];return s.a.createElement.apply(null,o)}return s.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},143:function(e,t,n){"use strict";var a=n(0),s=n(34);t.a=function(){return Object(a.useContext)(s.a)}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(143);function s(e){const{siteConfig:t}=Object(a.a)(),{baseUrl:n="/"}=t||{};if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}}}]);